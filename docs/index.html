<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hammerhead ZMQ Documentation</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h2><a href="index.html" style="color: #fff; text-decoration: none;">Hammerhead ZMQ</a></h2>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="api.html" class="nav-link">API Reference</a></li>
                <li><a href="examples.html" class="nav-link">Examples</a></li>
            </ul>
        </div>
    </nav>

    <header class="hero">
        <div class="container">
            <h1>Hammerhead ZMQ Client Library</h1>
            <p class="hero-subtitle">A comprehensive Python and C++ client library for interfacing with the Hammerhead stereo vision system via ZeroMQ</p>
            <div class="hero-buttons">
                <a href="#quick-start" class="btn btn-primary">Get Started</a>
                <a href="examples.html" class="btn btn-secondary">View Examples</a>
            </div>
        </div>
    </header>

    <main class="main-content">
        <section id="overview" class="section">
            <div class="container">
                <h2>Overview</h2>
                <div class="grid-2">
                    <div>
                        <p>The Hammerhead system is a high-performance stereo vision processing unit that publishes various types of data over ZeroMQ. This library provides easy-to-use APIs for receiving and processing:</p>
                        <ul>
                            <li><strong>Stereo Images</strong> - Raw and rectified left/right camera feeds</li>
                            <li><strong>Depth Data</strong> - Disparity maps and color-blended depth images</li>
                            <li><strong>Point Clouds</strong> - 3D reconstruction data with optional RGB</li>
                            <li><strong>Obstacle Detection</strong> - Real-time obstacle data with bounding boxes</li>
                            <li><strong>Camera Control</strong> - Parameter adjustment and scheduling</li>
                        </ul>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h3>üêç Python Ready</h3>
                            <p>Complete Python package with examples and utilities</p>
                        </div>
                        <div class="feature-card">
                            <h3>‚ö° High Performance C++</h3>
                            <p>Optimized C++ implementation for real-time applications</p>
                        </div>
                        <div class="feature-card">
                            <h3>üîå ZeroMQ Protocol</h3>
                            <p>Efficient, low-latency messaging with automatic reconnection</p>
                        </div>
                        <div class="feature-card">
                            <h3>üì° Network Ready</h3>
                            <p>Works seamlessly across network connections</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="quick-start" class="section bg-light">
            <div class="container">
                <h2>Quick Start</h2>
                
                <div class="tabs">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="python">Python</button>
                        <button class="tab-button" data-tab="cpp">C++</button>
                    </div>
                    
                    <div class="tab-content active" id="python">
                        <h3>Python Installation & Usage</h3>
                        <pre><code class="language-bash"># Install the package
pip install -e .

# View live stereo images from Hammerhead device at 192.168.1.100
python examples/python/image_viewer/image_viewer/image_viewer.py 192.168.1.100 nodar/left/image_raw

# Record point clouds to PLY files
python examples/python/point_cloud_recorder/point_cloud_recorder/point_cloud_recorder.py 192.168.1.100

# Record obstacle detection data
python examples/python/obstacle_data_recorder/obstacle_data_recorder/obstacle_data_recorder.py 192.168.1.100</code></pre>
                    </div>
                    
                    <div class="tab-content" id="cpp">
                        <h3>C++ Build & Usage</h3>
                        <pre><code class="language-bash"># Build all examples
mkdir build && cd build
cmake .. && cmake --build . --config Release

# View live images
./examples/cpp/image_viewer/image_viewer 192.168.1.100 nodar/left/image_raw

# Record point clouds
./examples/cpp/point_cloud_recorder/point_cloud_recorder 192.168.1.100</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <section id="message-types" class="section">
            <div class="container">
                <h2>Message Types</h2>
                <p>Hammerhead publishes data using structured message types over predefined ZMQ ports:</p>
                
                <div class="message-types-grid">
                    <div class="message-type-card">
                        <h3>Image Messages</h3>
                        <p><code>StampedImage</code> - Timestamped image data with OpenCV compatibility</p>
                        <div class="ports">
                            <span class="port">Port 9800: Left Raw</span>
                            <span class="port">Port 9801: Right Raw</span>
                            <span class="port">Port 9802: Left Rectified</span>
                            <span class="port">Port 9803: Right Rectified</span>
                            <span class="port">Port 9804: Disparity</span>
                            <span class="port">Port 9805: Color Depth</span>
                        </div>
                    </div>
                    
                    <div class="message-type-card">
                        <h3>Point Cloud Messages</h3>
                        <p>3D reconstruction data in standard formats</p>
                        <div class="ports">
                            <span class="port">Port 9806: Point Cloud Soup</span>
                            <span class="port">Port 9809: Ordered Point Cloud</span>
                            <span class="port">Port 9810: RGB Point Cloud</span>
                        </div>
                    </div>
                    
                    <div class="message-type-card">
                        <h3>Obstacle Data</h3>
                        <p><code>ObstacleData</code> - Real-time obstacle detection with bounding boxes and velocity</p>
                        <div class="ports">
                            <span class="port">Port 9812: Obstacle Data</span>
                        </div>
                    </div>
                    
                    <div class="message-type-card">
                        <h3>Control Messages</h3>
                        <p>Camera parameter control and system scheduling</p>
                        <div class="ports">
                            <span class="port">Port 9807: Camera Exposure</span>
                            <span class="port">Port 9808: Camera Gain</span>
                            <span class="port">Port 9811: Recording Control</span>
                            <span class="port">Port 9814: Scheduler</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="installation" class="section bg-light">
            <div class="container">
                <h2>Installation</h2>
                
                <div class="grid-2">
                    <div>
                        <h3>Python Dependencies</h3>
                        <pre><code class="language-bash"># Install core dependencies
pip install -r requirements.txt

# Install ZMQ message types
pip install -e zmq_msgs/python

# Install specific examples (optional)
pip install -e examples/python/image_viewer
pip install -e examples/python/point_cloud_recorder</code></pre>
                        
                        <h4>Python Requirements</h4>
                        <ul>
                            <li>Python 3.10+</li>
                            <li>NumPy ‚â•1.26.0</li>
                            <li>OpenCV ‚â•4.8.0</li>
                            <li>PyZMQ</li>
                            <li>PyYAML</li>
                            <li>tqdm</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3>C++ Dependencies</h3>
                        
                        <h4>Ubuntu</h4>
                        <pre><code class="language-bash"># Install build tools
sudo apt install build-essential cmake

# Install OpenCV (optional but recommended)
sudo apt install libopencv-dev</code></pre>
                        
                        <h4>Windows</h4>
                        <ul>
                            <li><strong>Visual Studio Community</strong> - <a href="https://visualstudio.microsoft.com/vs/community/" target="_blank">Download</a></li>
                            <li><strong>CMake 3.11+</strong> - <a href="https://github.com/Kitware/CMake/releases/" target="_blank">Download</a></li>
                            <li><strong>OpenCV 4.6.0+</strong> - <a href="https://opencv.org/releases/" target="_blank">Download</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="coordinate-system" class="section">
            <div class="container">
                <h2>3D Coordinate System & Point Cloud Conversion</h2>
                <p>Hammerhead follows standard stereo reconstruction principles for converting disparity to 3D point clouds:</p>
                
                <div class="conversion-info">
                    <h3>Disparity Scaling</h3>
                    <p>Disparity values are provided in Q12.4 format and must be scaled:</p>
                    <pre><code class="language-python">disparity_scaled = disparity / 16.0</code></pre>
                    
                    <h3>3D Reprojection</h3>
                    <p>Point clouds are generated using OpenCV's reprojection with a 4√ó4 matrix:</p>
                    <pre><code class="language-python"># Important: Negate the last row for correct coordinate frame
Q[3, :] = -Q[3, :]
points_3d = cv2.reprojectImageTo3D(disparity_scaled, Q)</code></pre>
                    
                    <p>This ensures a consistent right-handed coordinate frame across all point cloud outputs.</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Hammerhead ZMQ Documentation. Built for stereo vision developers.</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="script.js"></script>
</body>
</html>